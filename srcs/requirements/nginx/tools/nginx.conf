server {
	listen 443 ssl;
	listen [::]:443 ssl;


#don't forget to make the domain route to localhost on your VM/host machine!
	server_name mde-cloe.42.fr localhost;

	ssl_certificate		/etc/nginx/ssl/coolcert.crt;
	ssl_certificate_key	/etc/nginx/ssl/coolkey.key;


	ssl_protocols		TLSv1.2 TLSv1.3;

	#can be either html or html/wordpress and GETS CREATED IN SETUP SCRIPT!
	root /var/www/html/wordpress;

	#had an old normal index for testing
	#index index.html;
	index index.php index.nginx-debian.html;

#looks for matching files, if nothing found serve index (+ uri args)
	location / {
		try_files $uri $uri/ /index.php$is_args$args;
	}


# make all php uri requests use fastcgi (a sort of bridge langauge between nginx and PHP (wordpress))
#- split splits everything up to the .php and everything else is the path info
#	AKA the actual path that wordpress uses internally
#-  params are needed for wordpress and 2 important ones get set to what they need to be
# pass is where to redirect the request to
	location ~ \.php$ {
		fastcgi_split_path_info ^(.+\.php)(/.+)$;
		fastcgi_index index.php;
		include fastcgi_params;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		fastcgi_param SCRIPT_NAME $fastcgi_script_name;
		fastcgi_pass wordpress:9000; #PHP for wordpress will listen on the port 9000
	}
}
